{"version":3,"sources":["component/btn-verify-code.js"],"names":["Vue","component","props","template","data","btnSMSdisabled","SmsCodeText","methods","getSMSCode","timeOut","t","this","cid","setInterval","clearInterval","$","get","mobile","res","error","layer","alert","icon","$emit","user"],"mappings":"AAAAA,IAAIC,UAAU,mBACVC,OAAQ,UACRC,SAAU,kHACVC,KAAM,WACF,OACIC,gBAAgB,EAChBC,YAAa,UAGrBC,SACIC,WAAY,WACR,GAAIC,GAAU,GACVC,EAAIC,IACR,KAAID,EAAEL,eAAN,CAGAK,EAAEL,gBAAiB,EACnBK,EAAEJ,YAAcG,EAAU,OAC1B,IAAIG,GAAMC,YAAY,WAClBJ,IACAC,EAAEJ,YAAcG,EAAU,QACX,GAAXA,IACAK,cAAcF,GACdF,EAAEJ,YAAc,QAChBI,EAAEL,gBAAiB,IAExB,IACHU,GAAEC,IAAI,8BACAC,OAAQN,KAAKM,QACf,SAAUC,GACFA,EAAIC,QACJT,EAAEJ,YAAc,QAChBI,EAAEL,gBAAiB,EACnBS,cAAcF,GACdQ,MAAMC,MAAM,mBAAqBC,KAAM,OAGnDX,KAAKY,MAAM,gBAAiBZ,KAAKa","file":"btn-verify-code.js","sourcesContent":["Vue.component('btn-verify-code', {\r\n    props: ['mobile'],\r\n    template: ' <a v-bind:class=\"{disabled:btnSMSdisabled}\" v-on:click=\"getSMSCode\" class=\"btn-sms-code\">{{ SmsCodeText }}</a>',\r\n    data: function () {\r\n        return {\r\n            btnSMSdisabled: false,\r\n            SmsCodeText: '获取验证码'\r\n        }\r\n    },\r\n    methods: {\r\n        getSMSCode: function () {\r\n            var timeOut = 60\r\n            var t = this;\r\n            if (t.btnSMSdisabled) {\r\n                return;\r\n            }\r\n            t.btnSMSdisabled = true\r\n            t.SmsCodeText = timeOut + \"s 后重试\"\r\n            var cid = setInterval(function () {\r\n                timeOut--;\r\n                t.SmsCodeText = timeOut + \"s 后重试\"\r\n                if (timeOut == 0) {\r\n                    clearInterval(cid)\r\n                    t.SmsCodeText = \"获取验证码\"\r\n                    t.btnSMSdisabled = false\r\n                }\r\n            }, 1000)\r\n            $.get('/api/common/sendverifycode',\r\n                { mobile: this.mobile },\r\n                function (res) {\r\n                    if (res.error) {\r\n                        t.SmsCodeText = \"获取验证码\"\r\n                        t.btnSMSdisabled = false\r\n                        clearInterval(cid)\r\n                        layer.alert(\"发送失败,请检测手机号是否有误\", { icon: 0 })\r\n                    }\r\n                })\r\n            this.$emit('send-sms-code', this.user)\r\n        }\r\n    }\r\n})"]}