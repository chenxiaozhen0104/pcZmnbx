{"version":3,"sources":["order.js"],"names":["qrCallBack","eUrl","type","eStr","substr","lastIndexOf","$","val","AWarnMsg","order","common","work","wordedDialog","orderType","0","description","1","2","orderLevel","orderState","Created","Sending","Sended","Working","Worked","Unsolved","Cancel","Close","Confirm","userType","SvcCompanyUser","UseCompanyUser","SvcCompanyUserAdmin","UseCompanyUserAdmin","SuperAdmin","Common","appType","Use","Service","stateUse","8","css","btnContent","func","16","32","64","128","256","512","1024","2048","stateSvc","stateSvcAdmin","httpParam","LG","URL","orderId","get","uType","parseInt","localStorage","userId","aType","getOrderLevel","getOrderType","getState","suid","completeCallBack","XHR","TS","layer","closeAll","AErrorMsg","obj","parseJSON","responseText","success","ARightMsg","setTimeout","window","location","reload","cancel","attr","DialogModel","AComfig","Loading","ajax","url","data","complete","openQrCode","href","worked","serviceUserId","state","level","toUserId","dispatchDialog","dispatch","user","name","id","serviceUserName","serviceUserPhone","phone","confirmDialog","commentDialog","html","getstatelist","transferOrder","alert","paged","pageIndex","curState","pagePage","allowPaged","vueModule","Vue","el","items","statelist","methods","search","done","stateGoto","filters","stateDescription","stateCss","typeDescription","levelDescription","pIndex","index","atype","pageSize","concat","length","CloseLoad","scroll","scrollTop","document","height","opendetails","details","selectUser","getSubmitFunc","getSubmitContent","submitCss","result","submitContent","submitFunc"],"mappings":"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","file":"order.js","sourcesContent":["\r\nvar order = order || {};\r\n\r\norder.common = {\r\n    orderType: {\r\n        /// <summary>\r\n        /// 未知\r\n        /// </summary>\r\n        0: { description: \"未知\" },\r\n        /// <summary>\r\n        /// 需要维修\r\n        /// </summary>\r\n        1: { description: \"需要维修\" },\r\n        /// <summary>\r\n        /// 保养\r\n        /// </summary>\r\n        2: { description: \"需要保养\" }\r\n    },\r\n    orderLevel: {\r\n        /// <summary>\r\n        /// 未知\r\n        /// </summary>\r\n        0: { description: \"未知\" },\r\n        /// <summary>\r\n        /// 普通工单\r\n        /// </summary>\r\n        1: { description: \"普通工单\" },\r\n        /// <summary>\r\n        /// 加急工单\r\n        /// </summary>\r\n        2: { description: \"加急工单\" }\r\n    },\r\n    orderState: {\r\n        /// <summary>\r\n        /// 用户显示\"新工单\"\r\n        /// </summary>\r\n        Created: 4,\r\n        /// <summary>\r\n        /// 用户显示\"派单中\" 维修管理员显示\"待派单\"\r\n        /// </summary>\r\n        Sending: 8,\r\n        /// <summary>\r\n        /// 用户显示\"已派单\" 维修管理员显示\"已派单\" 维修人员显示\"待服务\"\r\n        /// </summary>\r\n        Sended: 16,\r\n        /// <summary>\r\n        /// 用户显示\"工作中\" 维修管理员显示\"工作中\" 维修人员显示\"工作中\"\r\n        /// </summary>\r\n        Working: 32,\r\n        /// <summary>\r\n        /// 用户显示\"未确认\" 维修管理员显示\"未确认\" 维修人员显示\"未确认\"\r\n        /// </summary>\r\n        Worked: 64,\r\n        /// <summary>\r\n        /// 用户显示\"未解决\" 维修管理员显示\"未解决\" 维修人员显示\"未解决\"\r\n        /// </summary>\r\n        Unsolved: 128,\r\n        /// <summary>\r\n        /// 用户显示\"已取消\" 维修管理员显示\"已取消\" 维修人员显示\"已取消\"\r\n        /// </summary>\r\n        Cancel: 256,\r\n        /// <summary>\r\n        /// 用户显示\"已关闭\" 维修管理员显示\"已关闭\" 维修人员显示\"已关闭\"\r\n        /// </summary>\r\n        Close: 512,\r\n        /// <summary>\r\n        /// 用户显示\"已确认\" 维修管理员显示\"已完成\" 维修人员显示\"已完成\"\r\n        /// </summary>\r\n        Confirm: 1024,\r\n    },\r\n    userType: {\r\n        /// <summary>\r\n        /// 服务单位用户\r\n        /// </summary>\r\n        SvcCompanyUser: 1,\r\n        /// <summary>\r\n        /// 使用单位用户\r\n        /// </summary>\r\n        UseCompanyUser: 2,\r\n        /// <summary>\r\n        /// 服务单位用户管理员\r\n        /// </summary>\r\n        SvcCompanyUserAdmin: 4,\r\n        /// <summary>\r\n        /// 使用单位用户管理员\r\n        /// </summary>\r\n        UseCompanyUserAdmin: 8,\r\n        /// <summary>\r\n        /// 超级管理员\r\n        /// </summary>\r\n        SuperAdmin: 16,\r\n        /// <summary>\r\n        /// 公共用户\r\n        /// </summary>\r\n        Common: 32\r\n    },\r\n    appType:\r\n    {\r\n        /// <summary>\r\n        /// 报修\r\n        /// </summary>\r\n        Use: 1,\r\n        /// <summary>\r\n        /// 维修\r\n        /// </summary>\r\n        Service: 2\r\n    },\r\n    stateUse: {\r\n        8: { description: \"派单中\", css: \"bg_green\", btnContent: \"取消\", func: \"order.common.cancel()\" },\r\n        16: { description: \"已派单\", css: \"bg_green\", btnContent: \"取消\", func: \"order.common.cancel()\" },\r\n        32: { description: \"工作中\", css: \"bg_green\" },\r\n        64: { description: \"未确认\", css: \"bg_red\", btnContent: \"确认完成\", func: \"order.common.confirmDialog()\" },\r\n        128: { description: \"未解决\", css: \"bg_red\" },\r\n        256: { description: \"已取消\", css: \"bg_gray\" },\r\n        512: { description: \"已关闭\", css: \"bg_gray\" },\r\n        //1024: { description: \"未评论\", css: \"bg_orange\", btnContent: \"评论\", func: \"order.common.commentDialog()\" },\r\n        1024: { description: \"已完成\", css: \"bg_blue\" },\r\n        2048: { description: \"已完成\", css: \"bg_blue\" }\r\n    },\r\n    stateSvc: {\r\n        8: { description: \"待派单\", css: \"bg_orange\", },\r\n        16: { description: \"待服务\", css: \"bg_orange\", btnContent: \"开始工作\", func: \"order.common.openQrCode('work')\" },\r\n        32: { description: \"工作中\", css: \"bg_green\", btnContent: \"工作结束\", func: \"order.common.openQrCode('worked')\" },\r\n        64: { description: \"未确认\", css: \"bg_orange\" },\r\n        128: { description: \"未解决\", css: \"bg_red\", btnContent: \"开始工作\", func: \"order.common.openQrCode('work')\" },\r\n        256: { description: \"已取消\", css: \"bg_gray\" },\r\n        512: { description: \"已关闭\", css: \"bg_gray\" },\r\n        1024: { description: \"已完成\", css: \"bg_gray\" },\r\n        2048: { description: \"已完成\", css: \"bg_gray\" }\r\n    },\r\n    stateSvcAdmin: {\r\n        8: { description: \"待派单\", css: \"bg_orange\", btnContent: \"派单\", func: \"order.common.dispatchDialog()\" },\r\n        16: { description: \"已派单\", css: \"bg_blue\" },\r\n        32: { description: \"工作中\", css: \"bg_green\" },\r\n        64: { description: \"未确认\", css: \"bg_orange\" },\r\n        128: { description: \"未解决\", css: \"bg_red\" },\r\n        256: { description: \"已取消\", css: \"bg_gray\" },\r\n        512: { description: \"已关闭\", css: \"bg_gray\" },\r\n        1024: { description: \"已完成\", css: \"bg_gray\" },\r\n        2048: { description: \"已完成\", css: \"bg_gray\" }\r\n    },\r\n    //参数获取\r\n    httpParam: new LG.URL(),\r\n    //订单Id\r\n    orderId: function () { return order.common.httpParam.get(\"id\") },\r\n    //用户类型\r\n    uType: function () { return parseInt(localStorage.userType); },\r\n    //用户Id\r\n    userId: function () { return parseInt(localStorage.userId); },\r\n    //app类型\r\n    aType: function () { return parseInt(localStorage.appType); },\r\n    //工单级别\r\n    getOrderLevel: function (val) {\r\n        return order.common.orderLevel[val];\r\n    },\r\n    //工单类型\r\n    getOrderType: function (val) {\r\n        return order.common.orderType[val];\r\n    },\r\n    //用状态信息\r\n    getState: function (val, suid) {\r\n\r\n        switch (order.common.aType()) {\r\n            case order.common.appType.Use:\r\n                return order.common.stateUse[val];\r\n            case order.common.appType.Service:\r\n                if (suid == order.common.userId()) {\r\n                    return order.common.stateSvc[val];\r\n                }\r\n                if (order.common.uType() & order.common.userType.SvcCompanyUserAdmin) {\r\n                    return order.common.stateSvcAdmin[val];\r\n                }\r\n                else {\r\n                    return order.common.stateSvc[val];\r\n                }\r\n            default:\r\n                return order.common.stateUse[val];\r\n        }\r\n    },\r\n    completeCallBack: function (XHR, TS) {\r\n        layer.closeAll();\r\n\r\n        if (TS != \"success\") {\r\n            AErrorMsg(\"服务器繁忙，请稍后再试试\");\r\n        } else {\r\n            var obj = $.parseJSON(XHR.responseText);\r\n\r\n            if (obj.success) {\r\n                ARightMsg(\"执行成功\")\r\n            }\r\n            else {\r\n                AErrorMsg(\"服务器繁忙，请稍后再试试\");\r\n            }\r\n        }\r\n\r\n        setTimeout(function () {\r\n            window.location.reload();\r\n        }, 2000)\r\n    },\r\n    cancel: function () {\r\n        //不显示选择类型\r\n        $(\".radio-inline\").css(\"display\", \"none\");\r\n        //设置选中值\r\n        $(\"#workedDialog input:radio[name='workedState'][value='Cancel']\").attr(\"checked\", true);\r\n        //弹框\r\n        DialogModel($(\"#workedDialog\"), \"92%\", \"38%\");\r\n    },\r\n    work: function () {\r\n        AComfig(\"确定提交？\", function () {\r\n\r\n            Loading();\r\n\r\n            $.ajax({\r\n                url: \"/api/order/working\",\r\n                type: \"get\",\r\n                data: { \"orderId\": order.common.orderId() },\r\n                complete: order.common.completeCallBack\r\n            })\r\n        })\r\n    },\r\n    openQrCode: function (type) {\r\n        //order.common.wordedDialog();\r\n        //order.common.work();\r\n        window.location.href = \"http://action?target=_openqrcode&type=\" + type;\r\n    },\r\n    wordedDialog: function () {\r\n        //弹框\r\n        DialogModel($(\"#workedDialog\"), \"92%\", \"43%\");\r\n    },\r\n    worked: function () {\r\n\r\n        var description = $(\"#workedDialog #description\").val();\r\n\r\n        var serviceUserId = $(\"#serviceUserId\").val();\r\n\r\n        var state = $(\"#workedDialog input:radio[name='workedState']:checked\").val();\r\n\r\n        AComfig((!description ? \"您未输入信息,\" : \"\") + \"确定提交？\", function () {\r\n\r\n            Loading();\r\n\r\n            $.ajax({\r\n                url: \"/api/order/submitstate\",\r\n                type: \"get\",\r\n                data: { \"orderId\": order.common.orderId(), \"description\": description, \"state\": state, \"level\": 5, \"toUserId\": serviceUserId },\r\n                complete: order.common.completeCallBack\r\n            })\r\n        })\r\n    },\r\n    dispatchDialog: function () {\r\n        DialogModel($(\"#v-user\"), \"92%\", \"50%\");\r\n    },\r\n    dispatch: function (user) {\r\n        AComfig(\"确定派单给[\" + user.name + \"]？\", function () {\r\n\r\n            Loading();\r\n\r\n            $.ajax({\r\n                url: \"/api/order/dispatch\",\r\n                type: \"get\",\r\n                data: { \"orderId\": order.common.orderId(), \"serviceUserId\": user.id, \"serviceUserName\": user.name, \"serviceUserPhone\": user.phone },\r\n                complete: order.common.completeCallBack\r\n            })\r\n        })\r\n    },\r\n    confirmDialog: function () {\r\n        //不显示选择类型\r\n        $(\".radio-inline\").css(\"display\", \"none\");\r\n        //设置选中值\r\n        $(\"#workedDialog input:radio[name='workedState'][value='Confirm']\").attr(\"checked\", true);\r\n        //弹框\r\n        DialogModel($(\"#workedDialog\"), \"92%\", \"38%\");\r\n    },\r\n    commentDialog: function () {\r\n        //不显示选择类型\r\n        $(\".radio-inline\").css(\"display\", \"none\");\r\n\r\n        $(\".level\").css(\"display\", \"block\");\r\n        $(\"#contentTitle\").html(\"评论内容：\");\r\n\r\n        //设置选中值\r\n        $(\"#workedDialog input:radio[name='workedState'][value='UseComment']\").attr(\"checked\", true);\r\n        //弹框\r\n        DialogModel($(\"#workedDialog\"), \"92%\", \"40%\");\r\n    },\r\n    getstatelist: function () {\r\n        switch (order.common.aType()) {\r\n            case order.common.appType.Use:\r\n                return [{ name: \"派单中\", val: 8 },\r\n                { name: \"已派单\", val: 16 },\r\n                { name: \"工作中\", val: 32 },\r\n                { name: \"未确认\", val: 64 },\r\n                { name: \"未评论\", val: 1024 },\r\n                { name: \"进行中\", val: 8 + 16 + 32 + 64 + 1024 }];\r\n            case order.common.appType.Service:\r\n                return [{ name: \"待派单\", val: 8 },\r\n                { name: \"待服务\", val: 16 },\r\n                { name: \"工作中\", val: 32 },\r\n                { name: \"未确认\", val: 64 },\r\n                { name: \"未解决\", val: 128 },\r\n                { name: \"进行中\", val: 8 + 16 + 32 + 64 + 128 + 1024 }];\r\n            default:\r\n                return [];\r\n        }\r\n    },\r\n    //转单\r\n    transferOrder: function () {\r\n        alert(\"转单\");\r\n    }\r\n}\r\n//列表\r\norder.paged = {\r\n    // 请求地址\r\n    url: \"/api/order/search\",\r\n    // 页码初始化\r\n    pageIndex: 1,\r\n    //当前状态\r\n    curState: 4 + 8 + 16 + 32 + 64 + 1024,\r\n    // 页码初始化\r\n    pagePage: 20,\r\n    // 允许分页\r\n    allowPaged: true,\r\n    //vue模组\r\n    vueModule: new Vue({\r\n        el: \"#orderList\",\r\n        data: {\r\n            items: [],\r\n            statelist: order.common.getstatelist()\r\n        },\r\n        methods: {\r\n            search: function (done) {\r\n                order.paged.search(1, order.paged.curState, done);\r\n            },\r\n            stateGoto: function (val) {\r\n                order.paged.curState = val\r\n                order.paged.search(1, order.paged.curState);\r\n            }\r\n        },\r\n        filters: {\r\n            stateDescription: function (val, suid) {\r\n                return order.common.getState(val, suid).description;\r\n            },\r\n            stateCss: function (val, suid) {\r\n                return order.common.getState(val, suid).css;\r\n            },\r\n            typeDescription: function (val) {\r\n                return order.common.getOrderType(val).description;\r\n            },\r\n            levelDescription: function (val) {\r\n                return order.common.getOrderLevel(val).description;\r\n            }\r\n        }\r\n    }),\r\n    // 检索\r\n    search: function (pIndex, state, done) {\r\n        var index = Loading();\r\n        $.ajax({\r\n            url: order.paged.url,\r\n            type: \"post\",\r\n            data: { \"state\": order.paged.curState, \"atype\": order.common.aType(), \"pageIndex\": pIndex, 'pageSize': order.paged.pagePage },\r\n            success: function (obj) {\r\n                //首次加载直接赋值，这是因为防止下拉刷新带来的追加行为\r\n\r\n                if (pIndex < 2) {\r\n                    order.paged.vueModule.items = [].concat(obj.data);\r\n                }\r\n                else {\r\n                    order.paged.vueModule.items = order.paged.vueModule.items.concat(obj.data);\r\n                }\r\n                if (obj.data.length < order.paged.pagePage) {\r\n                    order.paged.allowPaged = false;\r\n\r\n                    $(\"#footerWran\").html(\"<div class='row text-center'>没有工单咯</div>\")\r\n                }\r\n            },\r\n            complete: function () {\r\n                CloseLoad(index);\r\n                done && done();\r\n            }\r\n        })\r\n    },\r\n    // 上滑分页\r\n    paged: function () {\r\n        $(window).scroll(function () {\r\n            if (!order.paged.allowPaged) {\r\n                return false;\r\n            }\r\n            if ($(window).scrollTop() >= ($(document).height() - $(window).height())) {\r\n\r\n                // 翻页+1\r\n                order.paged.pageIndex = parseInt(order.paged.pageIndex) + 1;\r\n\r\n                // 查询\r\n                order.paged.search(order.paged.pageIndex);\r\n            }\r\n        });\r\n    },\r\n    opendetails: function (id) {\r\n\r\n        window.location.href = \"orderdetails.html?id=\" + id;\r\n    }\r\n};\r\n\r\n//详情\r\norder.details = {\r\n    // 请求地址\r\n    url: \"/api/order/get\",\r\n    //vue模组\r\n    vueModule: new Vue({\r\n        el: \"#order\",\r\n\r\n        data: {\r\n            items: []\r\n        },\r\n        methods: {\r\n            selectUser: function (user) {\r\n                order.common.dispatch(user);\r\n            },\r\n            search: function (done) {\r\n                order.details.search(done);\r\n            },\r\n\r\n            getSubmitFunc: function (index, state, suid) {\r\n                return order.common.getState(state, suid).func[index];\r\n            },\r\n            getSubmitContent: function (index, state, suid) {\r\n                return order.common.getState(state, suid).btnContent[index];\r\n            }\r\n\r\n        },\r\n        filters: {\r\n            stateDescription: function (val, suid) {\r\n                return order.common.getState(val, suid).description;\r\n            },\r\n            stateCss: function (val, suid) {\r\n                return order.common.getState(val, suid).css;\r\n            },\r\n            typeDescription: function (val) {\r\n                return order.common.getOrderType(val).description;\r\n            },\r\n            levelDescription: function (val) {\r\n                return order.common.getOrderLevel(val).description;\r\n            },\r\n            submitCss: function (val, suid) {\r\n                var result = order.common.getState(val, suid);\r\n\r\n                if (result.btnContent) {\r\n                    return \"submitBlock\";\r\n                }\r\n                return \"submitNone\";\r\n            },\r\n            submitContent: function (val, suid) {\r\n                return order.common.getState(val, suid).btnContent;\r\n            },\r\n            submitFunc: function (val, suid) {\r\n                return order.common.getState(val, suid).func;\r\n            }\r\n        }\r\n    }),\r\n    // 检索\r\n    search: function (done) {\r\n        var index = Loading();\r\n        $.ajax({\r\n            url: order.details.url,\r\n            type: \"post\",\r\n            data: { \"id\": order.common.orderId() },\r\n            success: function (obj) {\r\n                order.details.vueModule.items = [].concat(obj);\r\n            },\r\n            complete: function () {\r\n                CloseLoad(index);\r\n                done && done();\r\n            }\r\n        })\r\n    }\r\n};\r\n\r\nfunction qrCallBack(eUrl, type) {\r\n    var eStr = eUrl.substr(eUrl.lastIndexOf('/') + 1);\r\n\r\n    if (eStr != $(\"input[name=QRCode]\").val()) {\r\n        AWarnMsg(\"二维码不正确\" + eStr);\r\n    }\r\n    else {\r\n        if (type == \"work\") {\r\n            order.common.work();\r\n        }\r\n        else if (type == \"worked\") {\r\n            order.common.wordedDialog();\r\n        }\r\n        else {\r\n            AWarnMsg(\"操作错误\");\r\n        }\r\n    }\r\n}\r\n\r\nwindow.order = order;"]}