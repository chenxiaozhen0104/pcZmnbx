function cacheUser(e){localStorage.userId=e.id+"",localStorage.userName=e.name,localStorage.userType=e.type,localStorage.userPhone=e.phone}localStorage.appType=function(){var e=new RegExp("(^|&)appType=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e),a=null!=o?unescape(o[2]):void 0;return a}();var login=new Vue({el:"#content",data:{passwordLogin:!1,userName:"",password:"",logo:1==localStorage.appType?"../images/login_logo.png":"../images/login_logoservice.png",mobile:"",smsCode:""},methods:{login:function(){var e=layer.msg("登录中...",{icon:16,time:0,shadeClose:!1});this.passwordLogin?$.post("/api/user/PasswordLogin",{userName:this.userName,password:this.password},function(o){o.error?(layer.msg(o.error,{icon:2,time:2e3}),layer.close(e)):(cacheUser(o),login.userInfo())}):$.post("/api/user/SMSLogin",{smsCode:this.smsCode,mobile:this.mobile},function(o){o.error?(layer.msg(o.error,{icon:2,time:2e3}),layer.close(e)):(cacheUser(o),login.userInfo())})},userInfo:function(){$.get("/api/user/Info",function(e){1==localStorage.appType?e.useCompany?location.href="repair.html?target=_blank_closecurrent&appType="+localStorage.appType:location.href="CompanyType.html?target=_blank_closecurrent&appType="+localStorage.appType:e.serviceCompany?location.href="orderlist.html?target=_blank_closecurrent&appType="+localStorage.appType:location.href="CompanyType.html?target=_blank_closecurrent&appType="+localStorage.appType})}}});
//# sourceMappingURL=login.js.map
